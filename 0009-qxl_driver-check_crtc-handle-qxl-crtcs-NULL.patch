From 83f80d69e8a6cfc3c9572d757fd117c790aa28cf Mon Sep 17 00:00:00 2001
Message-Id: <83f80d69e8a6cfc3c9572d757fd117c790aa28cf.1358430965.git.uril@redhat.com>
In-Reply-To: <cover.1358430965.git.uril@redhat.com>
References: <cover.1358430965.git.uril@redhat.com>
From: Uri Lublin <uril@redhat.com>
Date: Thu, 17 Jan 2013 13:05:20 +0200
Subject: [xf86 qxl driver PATCH 3/5] qxl_driver: check_crtc: handle qxl->crtcs == NULL

---
 src/qxl_driver.c |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)

diff --git a/src/qxl_driver.c b/src/qxl_driver.c
index 1a253d2..d8abb7b 100644
--- a/src/qxl_driver.c
+++ b/src/qxl_driver.c
@@ -1040,6 +1040,10 @@ check_crtc (qxl_screen_t *qxl)
     int i, count = 0;
     xf86CrtcPtr crtc;
     
+    if (qxl->crtcs == NULL) {
+        return 0;
+    }
+
     for (i = 0 ; i < qxl->num_heads; ++i)
     {
 	crtc = qxl->crtcs[i];
-- 
1.7.1

